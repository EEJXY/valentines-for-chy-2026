<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Letter for You ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #ffe6e6;
            --env: #ff4d6d;
            --env-dark: #d63384;
            --paper: #fff9e6;
            --text: #4b3621;
            --sticky: #fffeb3;
        }

        body {
            background-color: var(--bg);
            font-family: 'Quicksand', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            perspective: 1000px;
            overflow: hidden;
            position: relative;
        }

        /* --- PULSING BACKGROUND --- */
        body::before {
            content: "";
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 85.485C35.828 72.515 10 50.515 10 31.515C10 18.515 20 8.515 32.5 8.515C40.625 8.515 47.5 13.515 50 20.515C52.5 13.515 59.375 8.515 67.5 8.515C80 8.515 90 18.515 90 31.515C90 50.515 64.172 72.515 50 85.485Z' fill='%23ffb3c1' opacity='0.2'/%3E%3C/svg%3E");
            z-index: -5;
            animation: pulseBackground 4s infinite ease-in-out;
        }
        @keyframes pulseBackground {
            0%, 100% { background-size: 60px 60px; }
            50% { background-size: 65px 65px; }
        }

        /* --- BACKGROUND ELEMENTS --- */
        .background-elements {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; pointer-events: none; overflow: hidden;
        }

        /* --- FLOATING HEARTS --- */
        .floating-heart {
            position: absolute; bottom: -50px;
            font-size: 2rem; opacity: 0;
            animation: floatUp linear infinite;
            z-index: -2;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg) scale(0.8); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(-110vh) rotate(360deg) scale(1.2); opacity: 0; }
        }
        .h1 { left: 10%; animation-duration: 12s; animation-delay: 0s; }
        .h2 { left: 30%; animation-duration: 16s; animation-delay: 2s; }
        .h3 { left: 50%; animation-duration: 14s; animation-delay: 4s; }
        .h4 { left: 70%; animation-duration: 18s; animation-delay: 1s; }
        .h5 { left: 20%; animation-duration: 13s; animation-delay: 7s; }
        .h6 { left: 85%; animation-duration: 15s; animation-delay: 5s; }

        /* --- CHARACTERS --- */
        .bg-char {
            position: absolute; opacity: 0.7; max-width: 130px; height: auto;
            filter: drop-shadow(2px 2px 5px rgba(255, 77, 109, 0.2));
        }
        .char-hello-kitty { top: 5%; left: 5%; transform: rotate(-10deg); }
        .char-kuromi { top: 5%; right: 5%; transform: rotate(10deg); }
        .char-snoopy { bottom: 10%; left: 5%; transform: rotate(5deg); border-radius: 10px; }
        .char-mavis { bottom: 8%; right: 5%; max-width: 150px; }

        /* --- ENVELOPE --- */
        .envelope-wrapper {
            width: 320px; height: 220px; position: relative;
            transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer; z-index: 10;
        }
        .envelope-wrapper.flipped { transform: rotateY(180deg); }
        .front, .back-container {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden; border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex; justify-content: center; align-items: center;
        }
        .front { background-color: var(--env); z-index: 2; border: 2px solid rgba(255,255,255,0.2); }
        .front .stamp {
            position: absolute; top: 15px; right: 15px; width: 45px; height: 55px;
            background: rgba(255,255,255,0.2); border: 2px dashed white;
            display: flex; justify-content: center; align-items: center; color: white; font-size: 1.5rem;
        }
        .front .address { color: white; font-family: 'Dancing Script', cursive; font-size: 2.2rem; text-align: center; }
        .back-container { background-color: var(--env); transform: rotateY(180deg); }
        .back-container .pocket { position: absolute; width: 100%; height: 100%; background-color: var(--env); border-radius: 0 0 10px 10px; z-index: 4; }
        .back-container .flap {
            position: absolute; top: 0; width: 0; height: 0;
            border-left: 160px solid transparent; border-right: 160px solid transparent;
            border-top: 110px solid var(--env-dark); transform-origin: top;
            transition: transform 0.6s ease; z-index: 6;
        }
        .small-letter {
            position: absolute; bottom: 10px; width: 280px; height: 160px;
            background: var(--paper); z-index: 2; transition: transform 0.8s ease;
            display: flex; justify-content: center; align-items: center;
            font-family: 'Dancing Script', cursive; color: var(--env); font-size: 1.8rem;
        }
        .envelope-wrapper.open .flap { transform: rotateX(180deg); z-index: 1; }
        .envelope-wrapper.open .small-letter { transform: translateY(-130px); z-index: 5; }

        /* --- LETTER OVERLAY --- */
        #fullLetterOverlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 230, 230, 0.95); 
            z-index: 100; padding: 20px; box-sizing: border-box; overflow-y: auto;
            text-align: center;
        }
        .content-box {
            max-width: 550px; margin: 20px auto; background: var(--paper);
            padding: 40px; border-radius: 10px; box-shadow: 10px 10px 0px var(--env); color: var(--text);
            position: relative; text-align: left;
        }
        .content-box h1 { font-family: 'Dancing Script', cursive; color: var(--env); text-align: center; }
        .letter-p { line-height: 1.8; font-size: 1.15rem; margin-bottom: 20px; }
        .reason-btn {
            background: white; border: 2px solid var(--env); color: var(--env);
            padding: 10px 18px; border-radius: 25px; margin: 8px; cursor: pointer;
            display: inline-block; font-weight: bold; transition: 0.3s;
        }
        .reason-btn:hover { background: var(--env); color: white; transform: scale(1.05); }

        /* --- MODAL --- */
        #miniNote {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 200; justify-content: center; align-items: center;
        }
        .sticky-note {
            background: var(--sticky); padding: 25px; width: 320px; max-width: 85%; border-radius: 5px;
            box-shadow: 8px 8px 20px rgba(0,0,0,0.2); position: relative; text-align: center;
        }
        .bouquet-img { width: 100%; border-radius: 5px; display: none; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div class="background-elements">
        <div class="floating-heart h1">‚ù§Ô∏è</div>
        <div class="floating-heart h2">üíñ</div>
        <div class="floating-heart h3">üíò</div>
        <div class="floating-heart h4">üíï</div>
        <div class="floating-heart h5">‚ù§Ô∏è</div>
        <div class="floating-heart h6">üíñ</div>

        <img src="https://www.creationbysandyo.com/cdn/shop/files/00sanvalentine._013.png?v=1705169331&width=1946" class="bg-char char-hello-kitty" alt="Hello Kitty">
        <img src="https://i.pinimg.com/736x/f9/eb/de/f9ebde44d6c7ecb22357a6dca32ca899.jpg" class="bg-char char-kuromi" alt="Kuromi">
        <img src="https://peanuts.store/cdn/shop/files/unisex-staple-t-shirt-pink-front-675ca15981da5_pink_533x.jpg?v=1734123958" class="bg-char char-snoopy" alt="Snoopy">
        <img src="mavisandjohnny.jpg" class="bg-char char-mavis" alt="Mavis & Johnny">
    </div>

    <div class="envelope-wrapper" id="envWrap" onclick="handleSequence()">
        <div class="front">
            <div class="stamp">‚ù§Ô∏è</div>
            <div class="address">To My Favorite Person ‚ù§Ô∏è</div>
        </div>
        <div class="back-container">
            <div class="flap"></div>
            <div class="pocket"></div>
            <div class="small-letter">Happy Valentine's...</div>
        </div>
    </div>

    <div id="fullLetterOverlay">
        <div class="content-box">
            <h1>Happy Valentines Day</h1>
            
            <p class="letter-p">I love you so much beb! I know we‚Äôve had our ups and downs, pero I‚Äôm grateful that we‚Äôve been able to get through them.</p>
            
            <p class="letter-p">Alam ko na di ako perfect, but each day you make me want to try harder to become the best version of myself. Hindi lang para sakin, but to become someone you can be proud to call yours.</p>
            
            <p class="letter-p">Even though things are hard right now, you make it all worth it. Being with you makes me so much happier than you‚Äôll ever know, and I can't wait to see you next week.</p>
            
            <p class="letter-p">I‚Äôll always be here for you beb. And no matter what difficulties we may be going through, just remember that I will always love you.</p>

            <p style="text-align: center; font-family: 'Dancing Script', cursive; font-size: 2rem; margin-top: 30px;">
                Love, <br> Your Gatekeeper
            </p>

            <hr style="border:0; border-top: 1px solid #ddd; margin: 30px 0;">
            
            <h3 style="text-align: center; font-family: 'Quicksand', sans-serif;">Some little surprises...</h3>
            <div id="popups" style="text-align: center;">
                <button class="reason-btn" onclick="showPopup('text', 'I am so proud of you and everything you do.')">‚ú® A Reminder</button>
                <button class="reason-btn" onclick="showPopup('image', 'https://png.pngtree.com/png-clipart/20250318/original/pngtree-a-cheerful-cartoon-illustration-of-bouquet-pink-roses-tied-with-red-png-image_20676997.png')">üíê For You</button>
                <button class="reason-btn" onclick="showPopup('text', 'Seeing you smile is my favourite thing in the world - so don\'t ask me to not buy you foodüòÇ')">‚ú® Your Smile</button>
            </div>

            <button onclick="window.location.reload()" style="display:block; margin: 30px auto 0; background: none; border: none; text-decoration: underline; color: #888; cursor: pointer; font-family: 'Quicksand', sans-serif;">Close Letter</button>
        </div>
    </div>

    <div id="miniNote" onclick="closePopup()">
        <div class="sticky-note" onclick="event.stopPropagation()">
            <img id="popupImage" src="" class="bouquet-img" alt="Virtual Bouquet">
            <p id="popupText" style="color:#333; font-weight:500; font-size: 1.1rem; margin: 0;"></p>
            <p style="font-size:0.75rem; color:#999; margin-top:20px;">(Click anywhere to close)</p>
        </div>
    </div>

    <script>
        let state = 0; 
        function handleSequence() {
            const wrap = document.getElementById('envWrap');
            if (state === 0) {
                wrap.classList.add('flipped'); state = 1;
                setTimeout(() => {
                    wrap.classList.add('open'); state = 2;
                    setTimeout(() => {
                        document.getElementById('fullLetterOverlay').style.display = 'block';
                    }, 1400);
                }, 1000);
            }
        }
        function showPopup(type, content) {
            const modal = document.getElementById('miniNote');
            const img = document.getElementById('popupImage');
            const text = document.getElementById('popupText');
            if (type === 'image') {
                img.src = content; img.style.display = 'block'; text.style.display = 'none';
            } else {
                text.innerText = content; text.style.display = 'block'; img.style.display = 'none';
            }
            modal.style.display = 'flex';
        }
        function closePopup() { document.getElementById('miniNote').style.display = 'none'; }
    </script>
</body>

</html>
